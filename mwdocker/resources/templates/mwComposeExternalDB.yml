# MediaWiki with External Database
#
# This file was generated by pymediawikidocker {{pmwdVersion}} at {{timestamp}}
# see http://wiki.bitplan.com/index.php/Pymediawikidocker
#
# Access via "http://localhost:{{port}}"
# (or "http://docker-machine ip:{{port}}" if using docker-machine)

services:

  # MediaWiki
  mw:
    container_name: "{{container_base_name}}-mw"
    user: "{{uid}}:{{gid}}"
    build: .
    restart: always
    ports:
      - {{port}}:80
    external_links:
      - {{db_container_name}}:db
    volumes:
      - type: {{volume_type}}
        source: {{wiki_sites}}
        target: /var/www/mediawiki/sites
      - type: volume
        source: wiki-etc
        target: /etc
      - type: volume
        source: wiki-html
        target: /var/www/html
      - type: bind
        source: {{scripts_dir}}
        target: /scripts

volumes:
  wiki-etc:
    driver: local
  wiki-html:
    driver: local